"use strict";(self.webpackChunkai_book_hackathon=self.webpackChunkai_book_hackathon||[]).push([[5216],{6907:(e,n,r)=>{r.d(n,{A:()=>t});r(6540);var o=r(9211),s=r(4848);const t=function(e){var n=e.children,r=e.title,t=e.description;return(0,s.jsx)(o.A,{title:r,description:t,wrapperClassName:"auth-layout",children:(0,s.jsx)("div",{style:{minHeight:"100vh",display:"flex",alignItems:"center",justifyContent:"center",backgroundColor:"#0D0D0D"},children:(0,s.jsx)("div",{style:{width:"100%",maxWidth:"500px",margin:"0 auto",padding:"2rem"},children:n})})})}},7940:(e,n,r)=>{r.d(n,{y:()=>m});var o,s,t,a,i=r(2444),l=r(467),c=r(1787),u=function(e){"undefined"!=typeof window&&localStorage.setItem("better_auth_token",e)},d=function(){"undefined"!=typeof window&&localStorage.removeItem("better_auth_token")},m={register:(a=(0,l.A)((0,i.A)().m(function e(n,r,o){var s,t,a;return(0,i.A)().w(function(e){for(;;)switch(e.p=e.n){case 0:return console.log("Auth Service: Starting registration for email:",n),e.p=1,e.n=2,c.signUp.email({email:n,password:r,name:o});case 2:return s=e.v,console.log("Auth Service: Registration response:",s),t=null,s&&s.session&&s.session.token?t=s.session.token:s&&s.token?t=s.token:s&&s.data&&s.data.session&&s.data.session.token?t=s.data.session.token:s&&s.data&&s.data.token&&(t=s.data.token),t?(u(t),console.log("Auth Service: Token stored in localStorage")):(console.log("Auth Service: No token found in response"),console.log("Response structure:",JSON.stringify(s,null,2))),e.a(2,s);case 3:throw e.p=3,a=e.v,console.error("Registration error:",a),a;case 4:return e.a(2)}},e,null,[[1,3]])})),function(e,n,r){return a.apply(this,arguments)}),login:(t=(0,l.A)((0,i.A)().m(function e(n,r){var o,s,t;return(0,i.A)().w(function(e){for(;;)switch(e.p=e.n){case 0:return console.log("Auth Service: Starting login for email:",n),e.p=1,e.n=2,c.signIn.email({email:n,password:r});case 2:return o=e.v,console.log("Auth Service: Login response:",o),s=null,o&&o.session&&o.session.token?s=o.session.token:o&&o.token?s=o.token:o&&o.data&&o.data.session&&o.data.session.token?s=o.data.session.token:o&&o.data&&o.data.token&&(s=o.data.token),s?(u(s),console.log("Auth Service: Token stored in localStorage")):(console.log("Auth Service: No token found in response"),console.log("Response structure:",JSON.stringify(o,null,2))),e.a(2,o);case 3:throw e.p=3,t=e.v,console.error("Login error:",t),t;case 4:return e.a(2)}},e,null,[[1,3]])})),function(e,n){return t.apply(this,arguments)}),logout:(s=(0,l.A)((0,i.A)().m(function e(){var n,r;return(0,i.A)().w(function(e){for(;;)switch(e.p=e.n){case 0:return e.p=0,e.n=1,(0,c.signOut)();case 1:return n=e.v,d(),e.a(2,n);case 2:throw e.p=2,r=e.v,console.error("Logout error:",r),r;case 3:return e.a(2)}},e,null,[[0,2]])})),function(){return s.apply(this,arguments)}),getCurrentUser:(o=(0,l.A)((0,i.A)().m(function e(){return(0,i.A)().w(function(e){for(;;)if(0===e.n)return e.a(2)},e)})),function(){return o.apply(this,arguments)})}},9185:(e,n,r)=>{r.r(n),r.d(n,{default:()=>m});var o=r(2444),s=r(467),t=r(6540),a=r(6907),i=r(7940),l=r(3689),c=r(4848);const u=function(e){var n=e.onSuccess,r=e.onError,a=(0,t.useState)({email:"",password:""}),u=a[0],d=a[1],m=(0,t.useState)(!1),g=m[0],p=m[1],h=(0,t.useState)({}),f=h[0],v=h[1],w=(0,l.A)().refreshSession,k=function(e){var n,r;(d(Object.assign({},u,((n={})[e.target.name]=e.target.value,n))),f[e.target.name])&&v(Object.assign({},f,((r={})[e.target.name]="",r)))},S=function(){var e={};return u.email.trim()?/\S+@\S+\.\S+/.test(u.email)||(e.email="Email is invalid"):e.email="Email is required",u.password||(e.password="Password is required"),v(e),0===Object.keys(e).length},A=function(){var e=(0,s.A)((0,o.A)().m(function e(s){var t,a,l;return(0,o.A)().w(function(e){for(;;)switch(e.p=e.n){case 0:if(s.preventDefault(),S()){e.n=1;break}return e.a(2);case 1:return p(!0),v({}),e.p=2,e.n=3,i.y.login(u.email,u.password);case 3:if(null==(t=e.v)||!t.error){e.n=4;break}v({general:t.error.message||"Invalid email or password"}),e.n=6;break;case 4:if(!n){e.n=6;break}if(!w){e.n=5;break}return e.n=5,w();case 5:console.log("Login successful, redirecting..."),n();case 6:e.n=8;break;case 7:e.p=7,l=e.v,console.error("Login error:",l),a=l.message||"Invalid email or password",v({general:a}),r&&r(a);case 8:return e.p=8,p(!1),e.f(8);case 9:return e.a(2)}},e,null,[[2,7,8,9]])}));return function(n){return e.apply(this,arguments)}}();return(0,c.jsxs)("div",{className:"login-form",children:[(0,c.jsx)("h2",{children:"Sign In"}),f.general&&(0,c.jsx)("div",{className:"alert alert-error",children:f.general}),(0,c.jsxs)("form",{onSubmit:A,children:[(0,c.jsxs)("div",{className:"form-group",children:[(0,c.jsx)("label",{htmlFor:"email",children:"Email"}),(0,c.jsx)("input",{type:"email",id:"email",name:"email",value:u.email,onChange:k,className:"form-control "+(f.email?"is-invalid":""),placeholder:"Enter your email"}),f.email&&(0,c.jsx)("div",{className:"error-message",children:f.email})]}),(0,c.jsxs)("div",{className:"form-group",children:[(0,c.jsx)("label",{htmlFor:"password",children:"Password"}),(0,c.jsx)("input",{type:"password",id:"password",name:"password",value:u.password,onChange:k,className:"form-control "+(f.password?"is-invalid":""),placeholder:"Enter your password"}),f.password&&(0,c.jsx)("div",{className:"error-message",children:f.password})]}),(0,c.jsx)("button",{type:"submit",className:"btn btn-primary",disabled:g,children:g?"Signing in...":"Sign In"})]})]})};var d=r(6347);const m=function(){(0,d.W6)();var e=function(){var e=(0,s.A)((0,o.A)().m(function e(){return(0,o.A)().w(function(e){for(;;)switch(e.n){case 0:return e.n=1,new Promise(function(e){return setTimeout(e,300)});case 1:localStorage.getItem("better_auth_token")?window.location.href="/":setTimeout(function(){window.location.href="/"},500);case 2:return e.a(2)}},e)}));return function(){return e.apply(this,arguments)}}();return(0,c.jsx)(a.A,{title:"Sign In",description:"Sign in to your account",children:(0,c.jsx)("div",{className:"container margin-vert--lg",children:(0,c.jsx)("div",{className:"row",children:(0,c.jsxs)("div",{className:"col col--6 col--offset-3",children:[(0,c.jsx)(u,{onSuccess:e,onError:function(e){console.error("Login error:",e)}}),(0,c.jsxs)("div",{className:"margin-top--md",children:["Don't have an account? ",(0,c.jsx)("a",{href:"/signup",children:"Sign up here"})]})]})})})})}}}]);