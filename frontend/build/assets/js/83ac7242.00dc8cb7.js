"use strict";(self.webpackChunkai_book_hackathon=self.webpackChunkai_book_hackathon||[]).push([[7037],{6907:(e,r,n)=>{n.d(r,{A:()=>o});n(6540);var s=n(9211),a=n(4848);const o=function(e){var r=e.children,n=e.title,o=e.description;return(0,a.jsx)(s.A,{title:n,description:o,wrapperClassName:"auth-layout",children:(0,a.jsx)("div",{style:{minHeight:"100vh",display:"flex",alignItems:"center",justifyContent:"center",backgroundColor:"#0D0D0D"},children:(0,a.jsx)("div",{style:{width:"100%",maxWidth:"500px",margin:"0 auto",padding:"2rem"},children:r})})})}},7940:(e,r,n)=>{n.d(r,{y:()=>m});var s,a,o,t,i=n(2444),l=n(467),c=n(1787),u=function(e){"undefined"!=typeof window&&localStorage.setItem("better_auth_token",e)},d=function(){"undefined"!=typeof window&&localStorage.removeItem("better_auth_token")},m={register:(t=(0,l.A)((0,i.A)().m(function e(r,n,s){var a,o,t;return(0,i.A)().w(function(e){for(;;)switch(e.p=e.n){case 0:return console.log("Auth Service: Starting registration for email:",r),e.p=1,e.n=2,c.signUp.email({email:r,password:n,name:s});case 2:return a=e.v,console.log("Auth Service: Registration response:",a),o=null,a&&a.session&&a.session.token?o=a.session.token:a&&a.token?o=a.token:a&&a.data&&a.data.session&&a.data.session.token?o=a.data.session.token:a&&a.data&&a.data.token&&(o=a.data.token),o?(u(o),console.log("Auth Service: Token stored in localStorage")):(console.log("Auth Service: No token found in response"),console.log("Response structure:",JSON.stringify(a,null,2))),e.a(2,a);case 3:throw e.p=3,t=e.v,console.error("Registration error:",t),t;case 4:return e.a(2)}},e,null,[[1,3]])})),function(e,r,n){return t.apply(this,arguments)}),login:(o=(0,l.A)((0,i.A)().m(function e(r,n){var s,a,o;return(0,i.A)().w(function(e){for(;;)switch(e.p=e.n){case 0:return console.log("Auth Service: Starting login for email:",r),e.p=1,e.n=2,c.signIn.email({email:r,password:n});case 2:return s=e.v,console.log("Auth Service: Login response:",s),a=null,s&&s.session&&s.session.token?a=s.session.token:s&&s.token?a=s.token:s&&s.data&&s.data.session&&s.data.session.token?a=s.data.session.token:s&&s.data&&s.data.token&&(a=s.data.token),a?(u(a),console.log("Auth Service: Token stored in localStorage")):(console.log("Auth Service: No token found in response"),console.log("Response structure:",JSON.stringify(s,null,2))),e.a(2,s);case 3:throw e.p=3,o=e.v,console.error("Login error:",o),o;case 4:return e.a(2)}},e,null,[[1,3]])})),function(e,r){return o.apply(this,arguments)}),logout:(a=(0,l.A)((0,i.A)().m(function e(){var r,n;return(0,i.A)().w(function(e){for(;;)switch(e.p=e.n){case 0:return e.p=0,e.n=1,(0,c.signOut)();case 1:return r=e.v,d(),e.a(2,r);case 2:throw e.p=2,n=e.v,console.error("Logout error:",n),n;case 3:return e.a(2)}},e,null,[[0,2]])})),function(){return a.apply(this,arguments)}),getCurrentUser:(s=(0,l.A)((0,i.A)().m(function e(){return(0,i.A)().w(function(e){for(;;)if(0===e.n)return e.a(2)},e)})),function(){return s.apply(this,arguments)})}},9800:(e,r,n)=>{n.r(r),n.d(r,{default:()=>m});var s=n(2444),a=n(467),o=n(6540),t=n(6907),i=n(7940),l=n(3689),c=n(4848);const u=function(e){var r=e.onSuccess,n=e.onError,t=(0,o.useState)({name:"",email:"",password:"",confirmPassword:""}),u=t[0],d=t[1],m=(0,o.useState)(!1),p=m[0],f=m[1],h=(0,o.useState)({}),g=h[0],w=h[1],v=(0,l.A)().refreshSession,k=function(e){var r,n;(d(Object.assign({},u,((r={})[e.target.name]=e.target.value,r))),g[e.target.name])&&w(Object.assign({},g,((n={})[e.target.name]="",n)))},j=function(){var e={};return u.name.trim()||(e.name="Name is required"),u.email.trim()?/\S+@\S+\.\S+/.test(u.email)||(e.email="Email is invalid"):e.email="Email is required",u.password?u.password.length<8&&(e.password="Password must be at least 8 characters"):e.password="Password is required",u.password!==u.confirmPassword&&(e.confirmPassword="Passwords do not match"),w(e),0===Object.keys(e).length},x=function(){var e=(0,a.A)((0,s.A)().m(function e(a){var o,t,l;return(0,s.A)().w(function(e){for(;;)switch(e.p=e.n){case 0:if(a.preventDefault(),j()){e.n=1;break}return e.a(2);case 1:return f(!0),w({}),e.p=2,e.n=3,i.y.register(u.email,u.password,u.name);case 3:if(null==(o=e.v)||!o.error){e.n=4;break}w({general:o.error.message||"An error occurred during signup"}),e.n=6;break;case 4:if(!r){e.n=6;break}if(!v){e.n=5;break}return e.n=5,v();case 5:console.log("Signup successful, redirecting..."),r();case 6:e.n=8;break;case 7:e.p=7,l=e.v,console.error("Signup error:",l),t=l.message||"An error occurred during signup",w({general:t}),n&&n(t);case 8:return e.p=8,f(!1),e.f(8);case 9:return e.a(2)}},e,null,[[2,7,8,9]])}));return function(r){return e.apply(this,arguments)}}();return(0,c.jsxs)("div",{className:"signup-form",children:[(0,c.jsx)("h2",{children:"Sign Up"}),g.general&&(0,c.jsx)("div",{className:"alert alert-error",children:g.general}),(0,c.jsxs)("form",{onSubmit:x,children:[(0,c.jsxs)("div",{className:"form-group",children:[(0,c.jsx)("label",{htmlFor:"name",children:"Name"}),(0,c.jsx)("input",{type:"text",id:"name",name:"name",value:u.name,onChange:k,className:"form-control "+(g.name?"is-invalid":""),placeholder:"Enter your name"}),g.name&&(0,c.jsx)("div",{className:"error-message",children:g.name})]}),(0,c.jsxs)("div",{className:"form-group",children:[(0,c.jsx)("label",{htmlFor:"email",children:"Email"}),(0,c.jsx)("input",{type:"email",id:"email",name:"email",value:u.email,onChange:k,className:"form-control "+(g.email?"is-invalid":""),placeholder:"Enter your email"}),g.email&&(0,c.jsx)("div",{className:"error-message",children:g.email})]}),(0,c.jsxs)("div",{className:"form-group",children:[(0,c.jsx)("label",{htmlFor:"password",children:"Password"}),(0,c.jsx)("input",{type:"password",id:"password",name:"password",value:u.password,onChange:k,className:"form-control "+(g.password?"is-invalid":""),placeholder:"Enter your password"}),g.password&&(0,c.jsx)("div",{className:"error-message",children:g.password})]}),(0,c.jsxs)("div",{className:"form-group",children:[(0,c.jsx)("label",{htmlFor:"confirmPassword",children:"Confirm Password"}),(0,c.jsx)("input",{type:"password",id:"confirmPassword",name:"confirmPassword",value:u.confirmPassword,onChange:k,className:"form-control "+(g.confirmPassword?"is-invalid":""),placeholder:"Confirm your password"}),g.confirmPassword&&(0,c.jsx)("div",{className:"error-message",children:g.confirmPassword})]}),(0,c.jsx)("button",{type:"submit",className:"btn btn-primary",disabled:p,children:p?"Signing up...":"Sign Up"})]})]})};var d=n(6347);const m=function(){(0,d.W6)();var e=function(){var e=(0,a.A)((0,s.A)().m(function e(){return(0,s.A)().w(function(e){for(;;)switch(e.n){case 0:return e.n=1,new Promise(function(e){return setTimeout(e,300)});case 1:localStorage.getItem("better_auth_token")?window.location.href="/":setTimeout(function(){window.location.href="/"},500);case 2:return e.a(2)}},e)}));return function(){return e.apply(this,arguments)}}();return(0,c.jsx)(t.A,{title:"Sign Up",description:"Create a new account",children:(0,c.jsx)("div",{className:"container margin-vert--lg",children:(0,c.jsx)("div",{className:"row",children:(0,c.jsxs)("div",{className:"col col--6 col--offset-3",children:[(0,c.jsx)(u,{onSuccess:e,onError:function(e){console.error("Signup error:",e)}}),(0,c.jsxs)("div",{className:"margin-top--md",children:["Already have an account? ",(0,c.jsx)("a",{href:"/login",children:"Sign in here"})]})]})})})})}}}]);